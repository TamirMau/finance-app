<div class="category-form-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>{{ isEdit ? 'עריכת קטגוריה' : 'קטגוריה חדשה' }}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="categoryForm" (ngSubmit)="onSubmit()">
        <div class="form-row">
          <div class="form-field full-width">
            <label class="form-label">שם *</label>
            <input 
              type="text"
              formControlName="name" 
              required
              maxlength="50"
              class="custom-input">
            <div class="form-error" *ngIf="categoryForm.get('name')?.hasError('required') && categoryForm.get('name')?.touched">
              שם חובה
            </div>
            <div class="form-error" *ngIf="categoryForm.get('name')?.hasError('maxlength') && categoryForm.get('name')?.touched">
              שם חייב להיות עד 50 תווים
            </div>
          </div>

          <div class="form-field full-width color-input-wrapper">
            <label class="form-label">צבע (אופציונלי - יוקצה אוטומטית אם לא נבחר)</label>
            <input 
              type="color"
              formControlName="color" 
              class="custom-input color-input">
            <p class="form-hint">אם לא תבחר צבע, יוקצה צבע אוטומטית מהפלטה</p>
          </div>
        </div>

        <div class="form-field full-width">
          <label class="form-label">אייקון (Material Icon שם)</label>
          <input 
            type="text"
            formControlName="icon" 
            placeholder="לדוגמה: home, work, shopping_cart"
            class="custom-input">
        </div>

        <div class="form-field full-width">
          <label class="form-label">סוג קטגוריה *</label>
          <select formControlName="type" class="custom-input">
            <option value="Expense">הוצאה</option>
            <option value="Income">הכנסה</option>
          </select>
          <div class="form-error" *ngIf="categoryForm.get('type')?.hasError('required') && categoryForm.get('type')?.touched">
            יש לבחור סוג קטגוריה
          </div>
        </div>

        <div class="actions">
          <button mat-raised-button type="button" routerLink="/categories">ביטול</button>
          <button mat-raised-button color="primary" type="submit" [disabled]="categoryForm.invalid || loading">
            {{ loading ? 'שומר...' : (isEdit ? 'עדכן' : 'צור') }}
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>

